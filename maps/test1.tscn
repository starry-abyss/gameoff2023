[gd_scene load_steps=13 format=3 uid="uid://cxaqvfti58xoq"]

[ext_resource type="PackedScene" uid="uid://c7k4uu8silsa6" path="res://scenes/battle_area.tscn" id="1_mgdil"]
[ext_resource type="Script" path="res://scripts/gameplay.gd" id="1_nrikt"]
[ext_resource type="Texture2D" uid="uid://bgbadqs8blksv" path="res://assets/kenney_game-icons/PNG/White/1x/gear.png" id="3_fbnhy"]
[ext_resource type="PackedScene" uid="uid://khbj7vpou3mu" path="res://scenes/battle_ui.tscn" id="3_iddt0"]
[ext_resource type="Script" path="res://scripts/button.gd" id="5_x4qsx"]
[ext_resource type="PackedScene" uid="uid://chr8t35qwnt7j" path="res://scenes/menu/options_menu.tscn" id="6_xh7ly"]
[ext_resource type="Shader" path="res://shaders/glitch.gdshader" id="8_bq4h5"]
[ext_resource type="Texture2D" uid="uid://dgfw5dh42i3qk" path="res://icon.svg" id="9_fr0wu"]

[sub_resource type="PlaneMesh" id="PlaneMesh_uuila"]

[sub_resource type="GDScript" id="GDScript_bx5im"]
script/source = "extends Camera3D


const CAMERA_SCROLL_SPEED = 5
const CAMERA_SIZE_MIN = 10
const CAMERA_SIZE_MAX = 30
const CAMERA_SIZE_ZOOM_STEP = 2


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	var movement = Vector3.ZERO
	
	if Input.is_action_pressed(\"Scroll Up\"):
		movement.z -= CAMERA_SCROLL_SPEED * delta
	if Input.is_action_pressed(\"Scroll Right\"):
		movement.x += CAMERA_SCROLL_SPEED * delta
	if Input.is_action_pressed(\"Scroll Down\"):
		movement.z += CAMERA_SCROLL_SPEED * delta
	if Input.is_action_pressed(\"Scroll Left\"):
		movement.x -= CAMERA_SCROLL_SPEED * delta
		
	if Input.is_action_just_pressed(\"Zoom In\"):
		size = clamp(size - CAMERA_SIZE_ZOOM_STEP, CAMERA_SIZE_MIN, CAMERA_SIZE_MAX)
	if Input.is_action_just_pressed(\"Zoom Out\"):
		size = clamp(size + CAMERA_SIZE_ZOOM_STEP, CAMERA_SIZE_MIN, CAMERA_SIZE_MAX)
		
	position += movement
"

[sub_resource type="Environment" id="Environment_mk85x"]
glow_enabled = true
glow_normalized = true
glow_intensity = 0.2
glow_strength = 1.7
glow_mix = 0.439
glow_blend_mode = 0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_a0hti"]
shader = ExtResource("8_bq4h5")
shader_parameter/range = 0.0
shader_parameter/noiseQuality = 300.0
shader_parameter/noiseIntensity = 0.000499961
shader_parameter/offsetIntensity = 0.03
shader_parameter/colorOffsetIntensity = 0.0

[node name="Test1" type="Node3D"]
script = ExtResource("1_nrikt")

[node name="camera_bounds" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.82016, 0, 0.658081)
visible = false
mesh = SubResource("PlaneMesh_uuila")

[node name="battle_area" parent="." instance=ExtResource("1_mgdil")]
unique_name_in_owner = true

[node name="battle_ui" parent="." instance=ExtResource("3_iddt0")]
unique_name_in_owner = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, -6.50845e-16, 1.74393e-16, 1.74393e-16, 0.5, 0.866026, -6.50845e-16, -0.866026, 0.5, 9, 4.029, 10.854)
projection = 1
current = true
size = 20.0
script = SubResource("GDScript_bx5im")

[node name="StudioEventEmitter3D" type="StudioEventEmitter3D" parent="Camera3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.258819, 0.25, -0.933012, 3.36902e-16, 0.965926, 0.258819, 0.965926, -0.0669873, 0.25, 0, 0, 0)
light_energy = 3.0
light_indirect_energy = 0.0
light_volumetric_fog_energy = 0.0
sky_mode = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_mk85x")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Button" type="Button" parent="CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -39.0
offset_top = 10.0
offset_right = 19.0
offset_bottom = 68.0
grow_horizontal = 0
scale = Vector2(0.5, 0.5)
icon = ExtResource("3_fbnhy")
script = ExtResource("5_x4qsx")

[node name="OptionsMenu" parent="CanvasLayer" instance=ExtResource("6_xh7ly")]
visible = false

[node name="Effect" type="Sprite2D" parent="."]
visible = false
material = SubResource("ShaderMaterial_a0hti")
position = Vector2(573.5, 323.5)
scale = Vector2(8.96094, 5.03906)
texture = ExtResource("9_fr0wu")

[connection signal="pressed" from="CanvasLayer/Button" to="." method="_on_button_pressed"]
