[gd_scene load_steps=13 format=3 uid="uid://khbj7vpou3mu"]

[ext_resource type="Script" path="res://scripts/battle_ui.gd" id="1_wpfyh"]
[ext_resource type="PackedScene" uid="uid://boljanqb1ln7c" path="res://scenes/selected_unit_stats.tscn" id="2_j36x1"]
[ext_resource type="Theme" uid="uid://bcihimekk2fq0" path="res://themes/ui.tres" id="3_7nk56"]
[ext_resource type="PackedScene" uid="uid://b41dl1bx7tp07" path="res://scenes/draw_3d.tscn" id="3_ji5a4"]
[ext_resource type="FontFile" uid="uid://ckdo8mgv1ag2i" path="res://assets/fonts/ShareTechMono-Regular.ttf" id="3_x7kol"]
[ext_resource type="Script" path="res://scenes/SelectedUnitIndicator.gd" id="4_h3s35"]
[ext_resource type="PackedScene" uid="uid://cxwuitxg37k3d" path="res://scenes/components/selected_unit_avatar.tscn" id="5_wvsta"]
[ext_resource type="PackedScene" uid="uid://b420toe6tohxy" path="res://scenes/components/unit_stats_container.tscn" id="6_yuq0d"]

[sub_resource type="InputEventKey" id="InputEventKey_h2l6t"]
device = -1
keycode = 69
unicode = 101

[sub_resource type="Shortcut" id="Shortcut_wykwr"]
events = [SubResource("InputEventKey_h2l6t")]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_meo4c"]
shading_mode = 0
specular_mode = 2
disable_ambient_light = true
albedo_color = Color(0, 1, 0, 1)
disable_receive_shadows = true
grow_amount = 1.0

[sub_resource type="TextMesh" id="TextMesh_y8ha2"]
material = SubResource("StandardMaterial3D_meo4c")
text = "▽"
font = ExtResource("3_x7kol")
font_size = 64

[node name="battle_ui" type="Node3D"]
script = ExtResource("1_wpfyh")
metadata/_edit_vertical_guides_ = [10.0, 1142.0]
metadata/_edit_horizontal_guides_ = [466.0]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="TooltipPanel" parent="CanvasLayer" instance=ExtResource("2_j36x1")]
offset_left = 20.0
offset_top = 159.0
offset_right = 279.0
offset_bottom = 626.0

[node name="HoveredUnitStatsPanel" parent="CanvasLayer" instance=ExtResource("6_yuq0d")]
custom_minimum_size = Vector2(240, 70)
offset_left = 20.0
offset_top = 86.0
offset_right = 279.0
offset_bottom = 128.0

[node name="Panel" type="Panel" parent="CanvasLayer"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -265.0
offset_top = -223.0
offset_right = 265.0
offset_bottom = -23.0
grow_horizontal = 2
grow_vertical = 0
theme = ExtResource("3_7nk56")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/Panel"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/Panel/VBoxContainer"]
layout_mode = 2

[node name="SelectedUnitStatsPanel" parent="CanvasLayer/Panel/VBoxContainer/HBoxContainer" instance=ExtResource("6_yuq0d")]
unique_name_in_owner = true
layout_mode = 2
full_hp_ap = true

[node name="ability_buttons" type="HBoxContainer" parent="CanvasLayer/Panel/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
theme_override_constants/separation = 10
alignment = 1

[node name="end_turn" type="Button" parent="CanvasLayer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(200, 2.08165e-12)
offset_left = 924.0
offset_top = 465.0
offset_right = 1124.0
offset_bottom = 496.0
theme = ExtResource("3_7nk56")
shortcut = SubResource("Shortcut_wykwr")
text = "End turn"

[node name="select_idle_unit" type="Button" parent="CanvasLayer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(200, 2.08165e-12)
offset_left = 655.0
offset_top = 484.0
offset_right = 855.0
offset_bottom = 514.0
theme = ExtResource("3_7nk56")
text = "Next idle unit"

[node name="cancel_select_target" type="Button" parent="CanvasLayer"]
custom_minimum_size = Vector2(200, 2.08165e-12)
offset_left = 437.0
offset_top = 560.0
offset_right = 706.0
offset_bottom = 590.0
theme = ExtResource("3_7nk56")
text = "Cancel selecting target"

[node name="end_game_message" type="Label" parent="CanvasLayer"]
offset_left = 14.0
offset_top = 190.0
offset_right = 1138.0
offset_bottom = 263.0
theme_override_fonts/font = ExtResource("3_x7kol")
theme_override_font_sizes/font_size = 64
text = "TEST"
horizontal_alignment = 1

[node name="SelectedUnitAvatar" parent="CanvasLayer" instance=ExtResource("5_wvsta")]
visible = false
offset_left = 861.0
offset_top = 538.0
offset_right = 961.0
offset_bottom = 638.0

[node name="ai_turn_message" type="Label" parent="CanvasLayer"]
offset_left = 418.0
offset_top = 497.0
offset_right = 733.0
offset_bottom = 570.0
theme_override_fonts/font = ExtResource("3_x7kol")
theme_override_font_sizes/font_size = 64
text = "AI's turn"

[node name="SelectedUnitIndicator" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 1.2, 2.08165e-12)
visible = false
script = ExtResource("4_h3s35")

[node name="cursor_old" type="Label3D" parent="SelectedUnitIndicator"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 2.08165e-12, 2.08165e-12)
visible = false
outline_modulate = Color(0.105882, 0.768627, 0.227451, 1)
text = "▽"
font_size = 128
outline_size = 20

[node name="cursor" type="MeshInstance3D" parent="SelectedUnitIndicator"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 3, -2.08165e-12, -1.2, -2.08165e-12)
cast_shadow = 0
gi_mode = 0
mesh = SubResource("TextMesh_y8ha2")
skeleton = NodePath("../..")

[node name="Draw3d" parent="." instance=ExtResource("3_ji5a4")]

[node name="Path3D" type="Path3D" parent="."]

[node name="PathFollow3D" type="PathFollow3D" parent="Path3D"]
transform = Transform3D(-4.37114e-08, -2.08165e-13, -1, 0, 1, -2.08165e-13, 1, -9.09917e-21, -4.37114e-08, 0, 0, 0)

[node name="Node3D" type="Node3D" parent="Path3D/PathFollow3D"]

[node name="Timer" type="Timer" parent="Path3D"]
one_shot = true
